<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="metaRange">
<title>02: Multiple species • metaRange</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="02: Multiple species">
<meta property="og:description" content="metaRange">
<meta property="og:image" content="https://metaRange.github.io/metaRange/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">metaRange</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/A01_intro.html">01: Introduction to metaRange</a>
    <a class="dropdown-item" href="../articles/A02_multiple_species.html">02: Multiple species</a>
    <a class="dropdown-item" href="../articles/A03_niche_suitability.html">03: Niche suitability</a>
    <a class="dropdown-item" href="../articles/A04_dispersal.html">04: Dispersal</a>
    <a class="dropdown-item" href="../articles/A05_species_interactions.html">05: Species interactions</a>
    <a class="dropdown-item" href="../articles/A06_metabolic_scaling.html">06: Metabolic scaling</a>
    <a class="dropdown-item" href="../articles/A07_age_structured_populations.html">07: Age structured populations</a>
    <a class="dropdown-item" href="../articles/A08_advanced_options.html">08: Advanced options</a>
    <a class="dropdown-item" href="../articles/A09_troubleshooting_and_caveats.html">09: Troubleshooting / caveats</a>
    <a class="dropdown-item" href="../articles/A10_saving_results.html">10: Saving results</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/metaRange/metaRange/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>02: Multiple species</h1>
                        <h4 data-toc-skip class="author">Fallert, S. and
Cabral, J.S.</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/metaRange/metaRange/blob/HEAD/vignettes/A02_multiple_species.Rmd" class="external-link"><code>vignettes/A02_multiple_species.Rmd</code></a></small>
      <div class="d-none name"><code>A02_multiple_species.Rmd</code></div>
    </div>

    
    
<p><code>metaRange</code> is not only able to simulate single species,
but it can also simulate multiple species at the same time. In this
vignette, we will expand our previous example to show how to set up a
multi-species simulation. These species will not interact (that is
explained in a different vignette), but rather be simulated in parallel,
so that we can directly compare how their population development differs
under the same environmental conditions.</p>
<div class="section level2">
<h2 id="setting-up-the-simulation">Setting up the simulation<a class="anchor" aria-label="anchor" href="#setting-up-the-simulation"></a>
</h2>
<p>As previously, we start by loading the packages and creating the
landscape.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://metaRange.github.io/metaRange/">metaRange</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'metaRange' was built under R version 4.3.3</span></span>
<span><span class="co">#&gt; metaRange version: 1.1.4</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.7.55</span></span>
<span></span>
<span><span class="co"># find the file</span></span>
<span><span class="va">raster_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/elev.tif"</span>, package <span class="op">=</span> <span class="st">"terra"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load it</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">raster_file</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># scale it</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">r</span>, center <span class="op">=</span> <span class="cn">FALSE</span>, scale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">r</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">landscape</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/sds.html" class="external-link">sds</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">landscape</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"habitat_quality"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot the first layer of the landscape</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">landscape</span><span class="op">[[</span><span class="st">"habitat_quality"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Habitat quality"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="A02_multiple_species_files/figure-html/setup-1.png" alt="Figure 1: The habitat quality of the example landscape. Note: higher value = better habitat quality" width="700"><p class="caption">
Figure 1: The habitat quality of the example landscape. Note: higher
value = better habitat quality
</p>
</div>
<p>Again, we create a simulation and add the landscape to it.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_simulation.html">create_simulation</a></span><span class="op">(</span></span>
<span>    source_environment <span class="op">=</span> <span class="va">landscape</span>,</span>
<span>    ID <span class="op">=</span> <span class="st">"multiple_species"</span>,</span>
<span>    seed <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-more-species-to-the-simulation">Adding more species to the simulation<a class="anchor" aria-label="anchor" href="#adding-more-species-to-the-simulation"></a>
</h2>
<p>Instead of only adding one species to the simulation, we can just
supply more names in the <code>add_species()</code> call to create more
species.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_species</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species_1"</span>, <span class="st">"species_2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you are at any point wondering which, or how many species are in
the simulation, you can use the <code>species_names()</code> method.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">species_names</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "species_2" "species_1"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sim</span><span class="op">$</span><span class="fu">species_names</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-traits-to-multiple-species">Adding traits to (multiple) species<a class="anchor" aria-label="anchor" href="#adding-traits-to-multiple-species"></a>
</h2>
<p>The <code>add_traits()</code> method is able to add (multiple) traits
to multiple species at once, which is useful when setting up a large
number of species with the same traits. So instead of only specifying
one <code>species</code> argument, we can specify a vector of species
names, all of which will get the same traits. Here, we set the initial
abundance of the species to be proportional to the habitat quality. This
introduces a new concept of the environemnt: the <code>current</code>
property.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_traits</span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species_1"</span>, <span class="st">"species_2"</span><span class="op">)</span>,</span>
<span>    population_level <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    abundance <span class="op">=</span> <span class="fl">200</span> <span class="op">*</span> <span class="va">sim</span><span class="op">$</span><span class="va">environment</span><span class="op">$</span><span class="va">current</span><span class="op">[[</span><span class="st">"habitat_quality"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>As the name suggests, <code>sim$environment$current[["....."]]</code>
always refers to the “current” state of the landscape (i.e. the
environmental conditions in the present time step). So what is the
difference to the source <code>SDS</code> we used as input to create the
simulation?</p>
<ul>
<li>The <code>sim$environment$sourceSDS[["....."]]</code> is stored as
raster data, which has multiple sub-datasets (e.g. habitat quality,
temperature, …), multiple layer (one for each time step) and is
potentially stored on the disk, which makes it suitable to store large
amounts of data (the whole time series), but makes accessing it more
complicated and slow.</li>
<li>The <code>current</code> environment contains a 2 dimensional matrix
(i.e. only one / the current layer) for each of the sub-datasets in the
source SDS. These matricies are stored and accessible under the same
name as the respective data sets in the source SDS and they are stored
in memory. This makes it faster and easier to access and them use in
calculations (As seen in the code example above).</li>
</ul>
<p>The current environment is automatically updated at the beginning of
each time step, and right now (before the simulation has started) stores
the condition of the first time step (i.e. the first layer of each
sub-dataset of the sourceSDS).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define a nice color palette</span></span>
<span><span class="va">plot_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">100</span>, <span class="st">"BluYl"</span>, rev <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="va">sim</span>,</span>
<span>    obj <span class="op">=</span> <span class="st">"species_1"</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"abundance"</span>,</span>
<span>    main <span class="op">=</span> <span class="st">"Initial abundance"</span>,</span>
<span>    col <span class="op">=</span> <span class="va">plot_cols</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="A02_multiple_species_files/figure-html/initAbundance-1.png" alt="Figure 2: The initial abundance of the species." width="700"><p class="caption">
Figure 2: The initial abundance of the species.
</p>
</div>
<p>If we would want to add a trait to all species in the simulation,
without having to type their names, we could use the already mentioned
<code>species_names()</code> method to get a vector of all species names
and then use that as the <code>species</code> argument.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_traits</span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="fu">species_names</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    population_level <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    reproduction_rate <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>    carrying_capacity <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>    allee_threshold <span class="op">=</span> <span class="fl">150</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Since we only have the two species in the simulation this
<code>species = sim$species_names()</code> would be equivalent to the
previous call <code>species = c("species_1", "species_2")</code>.</p>
</div>
<div class="section level2">
<h2 id="adding-processes">Adding processes<a class="anchor" aria-label="anchor" href="#adding-processes"></a>
</h2>
<p>Until now, we have two species in the simulation that are virtually
identical (besides their name). If we want them to behave differently,
we need add different processes to them. For the sake of this tutorial,
we’ll assume that the species differ in their reproduction model.</p>
<div class="section level3">
<h3 id="reproduction">Reproduction<a class="anchor" aria-label="anchor" href="#reproduction"></a>
</h3>
<p>Species 1 will use the same <code>ricker_reproduction_model</code>
from the previous vignette, with the difference that now the habitat
quality will influence the carrying capacity (i.e. we multiply the two,
before passing it to the function as input).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_process</span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="st">"species_1"</span>,</span>
<span>    process_name <span class="op">=</span> <span class="st">"reproduction"</span>,</span>
<span>    process_fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="../reference/ricker_reproduction_model.html">ricker_reproduction_model</a></span><span class="op">(</span></span>
<span>            <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">abundance</span>,</span>
<span>            <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">reproduction_rate</span>,</span>
<span>            <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">carrying_capacity</span> <span class="op">*</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">environment</span><span class="op">$</span><span class="va">current</span><span class="op">$</span><span class="va">habitat_quality</span></span>
<span>        <span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">self</span><span class="op">$</span><span class="va">name</span>, <span class="st">" mean abundance: "</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">abundance</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    execution_priority <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In the case of species 2, we will use a Ricker model with additional
Allee effects (via the function:
<code>ricker_allee_reproduction_model</code>), which is an adapted
version from the model described in: Cabral, J.S. and Schurr, F.M.
(2010) [Ref. 1].</p>
<p>The Allee effect is also known as “depensation” or “negative density
dependence” and describes multiple different mechanisms that all lead to
lower reproduction rates in small populations (making them non-viable in
the long term and leading to their extinction over time). Some example
mechanisms of the Allee effect are: difficulties finding a mate due to
low population density, or increased predation pressure due to missing
protection from the crowd (see: Liermann and Hilborn, 2001) [Ref.
2].</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_process</span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="st">"species_2"</span>,</span>
<span>    process_name <span class="op">=</span> <span class="st">"reproduction"</span>,</span>
<span>    process_fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">abundance</span> <span class="op">&lt;-</span></span>
<span>            <span class="fu"><a href="../reference/ricker_allee_reproduction_model.html">ricker_allee_reproduction_model</a></span><span class="op">(</span></span>
<span>                <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">abundance</span>,</span>
<span>                <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">reproduction_rate</span>,</span>
<span>                <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">carrying_capacity</span> <span class="op">*</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">environment</span><span class="op">$</span><span class="va">current</span><span class="op">$</span><span class="va">habitat_quality</span>,</span>
<span>                <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">allee_threshold</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">self</span><span class="op">$</span><span class="va">name</span>, <span class="st">" mean abundance: "</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">$</span><span class="va">abundance</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    execution_priority <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="executing-the-simulation">Executing the simulation<a class="anchor" aria-label="anchor" href="#executing-the-simulation"></a>
</h2>
<p>Now we can execute the simulation and compare the abundance
distributions of the two species.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_verbosity.html">set_verbosity</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">sim</span><span class="op">$</span><span class="fu">begin</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 348.709489547274"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 113.066829172314"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 577.208810253916"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 125.016153630418"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 497.450380346053"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 143.677696198853"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 538.40186195848"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 174.359283926975"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 518.397874403992"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 226.71976346029"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 528.487508675932"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 310.122736448007"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 523.467949256324"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 391.190632359679"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 525.983603165407"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 422.940404661898"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 524.727298281258"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 451.072431872118"</span></span>
<span><span class="co">#&gt; [1] "species_1 mean abundance: 525.355824461575"</span></span>
<span><span class="co">#&gt; [1] "species_2 mean abundance: 458.686829593375"</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="va">sim</span>,</span>
<span>    obj <span class="op">=</span> <span class="st">"species_1"</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"abundance"</span>,</span>
<span>    main <span class="op">=</span> <span class="st">"Species 1: abundance"</span>,</span>
<span>    col <span class="op">=</span> <span class="va">plot_cols</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="A02_multiple_species_files/figure-html/resA-1.png" alt="Figure 3: The resulting abundance distribution of species 1 after 10 simulation time steps." width="700"><p class="caption">
Figure 3: The resulting abundance distribution of species 1 after 10
simulation time steps.
</p>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="va">sim</span>,</span>
<span>    obj <span class="op">=</span> <span class="st">"species_2"</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"abundance"</span>,</span>
<span>    main <span class="op">=</span> <span class="st">"Species 2: abundance"</span>,</span>
<span>    col <span class="op">=</span> <span class="va">plot_cols</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="A02_multiple_species_files/figure-html/resB-1.png" alt="Figure 4: The resulting abundance distribution of species 2 after 10 simulation time steps." width="700"><p class="caption">
Figure 4: The resulting abundance distribution of species 2 after 10
simulation time steps.
</p>
</div>
<p>Note how in areas of lower habitat quality, the populations of
species 2 are extinct since their abundance was lower than the Allee
threshold. If we would combine this with a dispersal process, this could
lead to areas that are colonized by species 2, but are permanent
population “sinks” for the species, since they would depend on
immigration from other areas and are not self-sustaining.</p>
</div>
<div class="section level2">
<h2 id="references">References:<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Cabral, J.S. and Schurr, F.M. (2010) Estimating demographic
models for the range dynamics of plant species. Global Ecology and
Biogeography, 19, 85–97. <a href="doi:10.1111/j.1466-8238.2009.00492.x" class="uri">doi:10.1111/j.1466-8238.2009.00492.x</a></p></li>
<li><p>Liermann, and Hilborn, (2001), Depensation: evidence, models and
implications. Fish and Fisheries, 2: 33–58. <a href="doi:10.1046/j.1467-2979.2001.00029.x" class="uri">doi:10.1046/j.1467-2979.2001.00029.x</a></p></li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stefan Fallert, Lea Li, Juliano Sarmento Cabral, Bavarian Ministry of Science and Arts (bayklif), Deutsche Bundesstiftung Umwelt (DBU).</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
