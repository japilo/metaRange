<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="metaRange">
<title>06: Metabolic scaling • metaRange</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="06: Metabolic scaling">
<meta property="og:description" content="metaRange">
<meta property="og:image" content="https://metaRange.github.io/metaRange/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">metaRange</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/A01_intro.html">01: Introduction to metaRange</a>
    <a class="dropdown-item" href="../articles/A02_multiple_species.html">02: Multiple species</a>
    <a class="dropdown-item" href="../articles/A03_niche_suitability.html">03: Niche suitability</a>
    <a class="dropdown-item" href="../articles/A04_dispersal.html">04: Dispersal</a>
    <a class="dropdown-item" href="../articles/A05_species_interactions.html">05: Species interactions</a>
    <a class="dropdown-item" href="../articles/A06_metabolic_scaling.html">06: Metabolic scaling</a>
    <a class="dropdown-item" href="../articles/A07_age_structured_populations.html">07: Age structured populations</a>
    <a class="dropdown-item" href="../articles/A08_advanced_options.html">08: Advanced options</a>
    <a class="dropdown-item" href="../articles/A09_troubleshooting_and_caveats.html">09: Troubleshooting / caveats</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/metaRange/metaRange/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>06: Metabolic scaling</h1>
                        <h4 data-toc-skip class="author">Fallert, S. and
Cabral, J.S.</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/metaRange/metaRange/blob/HEAD/vignettes/A06_metabolic_scaling.Rmd" class="external-link"><code>vignettes/A06_metabolic_scaling.Rmd</code></a></small>
      <div class="d-none name"><code>A06_metabolic_scaling.Rmd</code></div>
    </div>

    
    
<p>The temperature of the environment where a species lives (and their
bodymass) can have a large impact on their metabolism and in consequence
also on different processes such as growth, reproduction and mortality.
To include this effect, <code>metaRange</code> offers the option to use
metabolic scaling based on the “metabolic theory of ecology” described
by Brown et al. (2004) [Ref: 1] in the following form: <span class="math display">\[{parameter = normalization\_constant \cdot
mass^{scaling\_exponent} \cdot e^{\frac{E}{k \cdot
temperature}}}\]</span> This is implemented in the function
<code><a href="../reference/metabolic_scaling.html">metabolic_scaling()</a></code>, which can be used to calculate the
parameter value for any metabolically influenced process, based on the
mean individual body mass of a population, a process specific constant
and the temperature of the environment. It has to be noted that
different processes have different activation energy values and scaling
exponents.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Parameter</th>
<th align="center">Scaling exponent</th>
<th align="right">Activation energy</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">resource usage</td>
<td align="center">3/4</td>
<td align="right">-0.65</td>
</tr>
<tr class="even">
<td align="left">reproduction, mortality</td>
<td align="center">-1/4</td>
<td align="right">-0.65</td>
</tr>
<tr class="odd">
<td align="left">carrying capacity</td>
<td align="center">-3/4</td>
<td align="right">0.65</td>
</tr>
</tbody>
</table>
<p>Table 1: Common parameter and their associated scaling exponents and
activation energies. Source: table 4 in Brown, J.H., Sibly, R.M. and
Kodric-Brown, A. (2012) [Ref: 2]</p>
<div class="section level3">
<h3 id="calculating-the-normalization-constant">Calculating the normalization constant<a class="anchor" aria-label="anchor" href="#calculating-the-normalization-constant"></a>
</h3>
<p>In the absence of experimentally measured values for the
normalization constant, <code>metaRange</code> offers the function
<code><a href="../reference/calculate_normalization_constant.html">calculate_normalization_constant()</a></code> to calculate the
normalization constant based on an estimated value for the parameter
under a reference temperature.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/metaRange/metaRange" class="external-link">metaRange</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; metaRange version: 0.0.0.9000</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.7.55</span></span>
<span><span class="fu"><a href="../reference/set_verbosity.html">set_verbosity</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">raster_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/elev.tif"</span>, package <span class="op">=</span> <span class="st">"terra"</span><span class="op">)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">raster_file</span><span class="op">)</span></span>
<span><span class="va">temperature</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">r</span>, center <span class="op">=</span> <span class="cn">FALSE</span>, scale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">*</span> <span class="fl">10</span> <span class="op">+</span> <span class="fl">273.15</span></span>
<span><span class="va">precipitation</span> <span class="op">&lt;-</span> <span class="va">r</span> <span class="op">*</span> <span class="fl">2</span></span>
<span><span class="va">temperature</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">temperature</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">precipitation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">precipitation</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">landscape</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/sds.html" class="external-link">sds</a></span><span class="op">(</span><span class="va">temperature</span>, <span class="va">precipitation</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">landscape</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temperature"</span>, <span class="st">"precipitation"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_simulation.html">create_simulation</a></span><span class="op">(</span><span class="va">landscape</span><span class="op">)</span></span>
<span><span class="va">sim</span><span class="op">$</span><span class="fu">add_species</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"species_1"</span><span class="op">)</span></span></code></pre></div>
<p>Define some basic traits.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_traits</span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="st">"species_1"</span>,</span>
<span>    population_level <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    temperature_maximum <span class="op">=</span> <span class="fl">300</span>,</span>
<span>    temperature_optimum <span class="op">=</span> <span class="fl">288</span>,</span>
<span>    temperature_minimum <span class="op">=</span> <span class="fl">280</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Add the parameter used in the metabolic scaling as global variables,
since they are not species specific.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_globals</span><span class="op">(</span></span>
<span>    <span class="st">"E_reproduction_rate"</span> <span class="op">=</span> <span class="op">-</span><span class="fl">0.65</span>,</span>
<span>    <span class="st">"E_carrying_capacity"</span> <span class="op">=</span> <span class="fl">0.65</span>,</span>
<span>    <span class="st">"exponent_reproduction_rate"</span> <span class="op">=</span> <span class="op">-</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">4</span>,</span>
<span>    <span class="st">"exponent_carrying_capacity"</span> <span class="op">=</span> <span class="op">-</span><span class="fl">3</span> <span class="op">/</span> <span class="fl">4</span>,</span>
<span>    <span class="st">"k"</span> <span class="op">=</span> <span class="fl">8.617333e-05</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Add traits that are used in the reproduction model including an
estimate of the reproduction rate and the carrying capacity.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_traits</span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="st">"species_1"</span>,</span>
<span>    population_level <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    <span class="st">"abundance"</span> <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    <span class="st">"reproduction_rate"</span> <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    <span class="st">"carrying_capacity"</span> <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>    <span class="st">"mass"</span> <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Calculate the normalization constant, based on the parameter estimate
and the optimal temperature of the species. Note that this could also be
done in a loop over multiple species.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_traits</span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="st">"species_1"</span>,</span>
<span>    population_level <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    <span class="st">"reproduction_rate_mte_constant"</span> <span class="op">=</span> <span class="fu"><a href="../reference/calculate_normalization_constant.html">calculate_normalization_constant</a></span><span class="op">(</span></span>
<span>        parameter_value <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">species_1</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"reproduction_rate"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        scaling_exponent <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"exponent_reproduction_rate"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        mass <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">species_1</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"mass"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        reference_temperature <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">species_1</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"temperature_optimum"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        E <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"E_reproduction_rate"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        k <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"k"</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"carrying_capacity_mte_constant"</span> <span class="op">=</span> <span class="fu"><a href="../reference/calculate_normalization_constant.html">calculate_normalization_constant</a></span><span class="op">(</span></span>
<span>        parameter_value <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">species_1</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"carrying_capacity"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        scaling_exponent <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"exponent_carrying_capacity"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        mass <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">species_1</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"mass"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        reference_temperature <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">species_1</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"temperature_optimum"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        E <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"E_carrying_capacity"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>        k <span class="op">=</span> <span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"k"</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Add a process that does the metabolic scaling in each time step.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">add_process</span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="st">"species_1"</span>,</span>
<span>    process_name <span class="op">=</span> <span class="st">"mte"</span>,</span>
<span>    process_fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"reproduction_rate"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/metabolic_scaling.html">metabolic_scaling</a></span><span class="op">(</span></span>
<span>            normalization_constant <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"reproduction_rate_mte_constant"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            scaling_exponent <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"exponent_reproduction_rate"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            mass <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"mass"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            temperature <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">environment</span><span class="op">$</span><span class="va">current</span><span class="op">[[</span><span class="st">"temperature"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            E <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"E_reproduction_rate"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            k <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"k"</span><span class="op">]</span><span class="op">]</span></span>
<span>        <span class="op">)</span></span>
<span></span>
<span>        <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"carrying_capacity"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/metabolic_scaling.html">metabolic_scaling</a></span><span class="op">(</span></span>
<span>            normalization_constant <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"carrying_capacity_mte_constant"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            scaling_exponent <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"exponent_carrying_capacity"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            mass <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">traits</span><span class="op">[[</span><span class="st">"mass"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            temperature <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">environment</span><span class="op">$</span><span class="va">current</span><span class="op">[[</span><span class="st">"temperature"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            E <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"E_carrying_capacity"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            k <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">sim</span><span class="op">$</span><span class="va">globals</span><span class="op">[[</span><span class="st">"k"</span><span class="op">]</span><span class="op">]</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    execution_priority <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>After this point, processes could be added that use the scaled
parameters. Here we just plot the scaled parameter instead.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span><span class="op">$</span><span class="fu">set_time_layer_mapping</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sim</span><span class="op">$</span><span class="fu">begin</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">plot_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">100</span>, <span class="st">"Purple-Yellow"</span>, rev <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sim</span>, <span class="st">"species_1"</span>, <span class="st">"reproduction_rate"</span>, col <span class="op">=</span> <span class="va">plot_cols</span>, main <span class="op">=</span> <span class="st">"Reproduction rate"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sim</span>, <span class="st">"species_1"</span>, <span class="st">"carrying_capacity"</span>, col <span class="op">=</span> <span class="va">plot_cols</span>, main <span class="op">=</span> <span class="st">"Carrying capacity"</span><span class="op">)</span></span></code></pre></div>
<p><img src="A06_metabolic_scaling_files/figure-html/add_processes2-1.png" width="700"><img src="A06_metabolic_scaling_files/figure-html/add_processes2-2.png" width="700"></p>
<p>Note that these results show an “everything else equal” scenario,
where the only variable is the temperature. In a more realistic
scenario, the suitability of the habitat might also influence the
reproduction rate and carrying capacity or the mean individual body mass
might change with the temperature and change the results.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Brown, J.H., Gillooly, J.F., Allen, A.P., Savage, V.M. and West,
G.B. (2004), Toward a Metabolic Theory of Ecology. <em>Ecology</em>,
<strong>85</strong>: 1771-1789. <a href="https://doi.org/10.1890/03-9000" class="external-link uri">https://doi.org/10.1890/03-9000</a></p></li>
<li><p>Brown, J.H., Sibly, R.M. and Kodric-Brown, A. (2012).
Introduction: Metabolism as the Basis for a Theoretical Unification of
Ecology. In: <em>Metabolic Ecology</em> (eds R.M. Sibly, J.H. Brown and
A. Kodric-Brown). <a href="https://doi.org/10.1002/9781119968535.ch" class="external-link uri">https://doi.org/10.1002/9781119968535.ch</a></p></li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stefan Fallert, Lea Li, Juliano Sarmento Cabral, Bavarian Ministry of Science and Arts (bayklif), Deutsche Bundesstiftung Umwelt (DBU).</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
